# åŽç¡•è·¯ç”±å™¨Clashç¿»å¢™å®žæˆ˜æ•™ç¨‹

> åŸºäºŽåŽç¡•RT-AX86U PROçš„Clashéƒ¨ç½²å…¨å±‹ç§‘å­¦ä¸Šç½‘æ–¹æ¡ˆ

## ðŸ“‹ ç›®å½•

- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [ç¡¬ä»¶å‡†å¤‡](#ç¡¬ä»¶å‡†å¤‡)
- [æ¢…æž—å›ºä»¶åˆ·æœº](#æ¢…æž—å›ºä»¶åˆ·æœº)
- [Clashå®‰è£…é…ç½®](#clashå®‰è£…é…ç½®)
- [ç½‘ç»œé…ç½®ä¸Žé€æ˜Žä»£ç†](#ç½‘ç»œé…ç½®ä¸Žé€æ˜Žä»£ç†)
- [é«˜çº§åŠŸèƒ½é…ç½®](#é«˜çº§åŠŸèƒ½é…ç½®)
- [ç›‘æŽ§ä¸Žç»´æŠ¤](#ç›‘æŽ§ä¸Žç»´æŠ¤)
- [æ•…éšœæŽ’é™¤](#æ•…éšœæŽ’é™¤)
- [å®‰å…¨ä¸Žéšç§](#å®‰å…¨ä¸Žéšç§)

## ðŸš€ å¿«é€Ÿå¼€å§‹

### 5åˆ†é’Ÿå¿«é€Ÿéƒ¨ç½²

å¦‚æžœæ‚¨å·²ç»æ‹¥æœ‰åŽç¡•RT-AX86U PROè·¯ç”±å™¨ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å¿«é€Ÿéƒ¨ç½²Clashï¼š

#### ç¬¬ä¸€æ­¥ï¼šåˆ·å…¥æ¢…æž—å›ºä»¶
1. ä¸‹è½½[æ¢…æž—å›ºä»¶](https://www.asuswrt-merlin.net/)
2. è¿›å…¥è·¯ç”±å™¨ç®¡ç†ç•Œé¢ â†’ ç³»ç»Ÿç®¡ç† â†’ å›ºä»¶å‡çº§
3. ä¸Šä¼ å›ºä»¶æ–‡ä»¶ï¼Œç­‰å¾…åˆ·æœºå®Œæˆ

#### ç¬¬äºŒæ­¥ï¼šå®‰è£…Clash
1. è¿›å…¥è½¯ä»¶ä¸­å¿ƒï¼Œæœç´¢"Clash"
2. ç‚¹å‡»å®‰è£…ï¼Œç­‰å¾…å®‰è£…å®Œæˆ
3. é…ç½®ä»£ç†èŠ‚ç‚¹ä¿¡æ¯

#### ç¬¬ä¸‰æ­¥ï¼šé…ç½®é€æ˜Žä»£ç†
1. è¿›å…¥Clashè®¾ç½®é¡µé¢
2. å¯ç”¨é€æ˜Žä»£ç†åŠŸèƒ½
3. é…ç½®åˆ†æµè§„åˆ™

#### ç¬¬å››æ­¥ï¼šæµ‹è¯•è¿žæŽ¥
1. é‡å¯è·¯ç”±å™¨
2. è®¿é—®Googleã€YouTubeç­‰ç½‘ç«™
3. æ£€æŸ¥IPåœ°å€æ˜¯å¦å·²æ”¹å˜

### å®Œæ•´é…ç½®æ—¶é—´
- **æ–°æ‰‹ç”¨æˆ·**: 30-60åˆ†é’Ÿ
- **æœ‰ç»éªŒç”¨æˆ·**: 15-30åˆ†é’Ÿ
- **ä¸“ä¸šç”¨æˆ·**: 5-10åˆ†é’Ÿ

### æ‰€éœ€å·¥å…·
- åŽç¡•RT-AX86U PROè·¯ç”±å™¨
- ç”µè„‘ï¼ˆWindows/Mac/Linuxï¼‰
- ç¨³å®šçš„ç½‘ç»œè¿žæŽ¥
- VPNæœåŠ¡å•†è´¦å·ï¼ˆå¯é€‰ï¼‰

### ä¸‹è½½é“¾æŽ¥æ±‡æ€»

#### æ¢…æž—å›ºä»¶ä¸‹è½½
- **KoolCenterä¸‹è½½**ï¼š[RT-AX86U PROæ¢…æž—å›ºä»¶](https://www.koolcenter.com/fw/device/rt-ax88u_pro/merlin)
- **å®˜æ–¹GitHub**ï¼š[æ¢…æž—å›ºä»¶å®˜æ–¹å‘å¸ƒé¡µ](https://github.com/RMerl/asuswrt-merlin.ng/releases)

#### Clashæ–‡ä»¶ä¸‹è½½
- **Telegramé¢‘é“**ï¼š[æ’¸çŒ«äº‘Clashæ–‡ä»¶](https://t.me/s/merlinclashfile)
- **æŽ¨èç‰ˆæœ¬**ï¼šMC_ARM64_250124.tar.gzï¼ˆRT-AX86U PROä¸“ç”¨ï¼‰

#### å…¶ä»–å·¥å…·
- **SSHå®¢æˆ·ç«¯**ï¼šPuTTYï¼ˆWindowsï¼‰ã€Terminalï¼ˆMac/Linuxï¼‰
- **æ–‡ä»¶ä¼ è¾“**ï¼šWinSCPï¼ˆWindowsï¼‰ã€FileZillaï¼ˆè·¨å¹³å°ï¼‰

## ðŸ”§ ç¡¬ä»¶å‡†å¤‡

### åŽç¡•RT-AX86U PRO è¯¦ç»†è§„æ ¼

![åŽç¡•RT-AX86U PRO](images/asus-rt-ax86u-pro.png)

| è§„æ ¼é¡¹ç›® | è¯¦ç»†å‚æ•° | è¯´æ˜Ž |
|---------|---------|------|
| **å¤„ç†å™¨** | åšé€šå››æ ¸1.8GHz | å¼ºå¤§çš„å¤„ç†æ€§èƒ½ï¼Œæ”¯æŒé«˜å¹¶å‘è¿žæŽ¥ |
| **å†…å­˜** | 1GB DDR4 | å……è¶³å†…å­˜æ”¯æŒClashè¿è¡Œ |
| **å­˜å‚¨** | 256MB Flash | å¤§å®¹é‡å­˜å‚¨ï¼Œæ”¯æŒå®‰è£…æ›´å¤šæ’ä»¶ |
| **æ— çº¿æ€§èƒ½** | Wi-Fi 6 (802.11ax) | åŒé¢‘å¹¶å‘5700Mbps |
| **æœ‰çº¿æŽ¥å£** | 1Ã—2.5G WAN + 4Ã—1G LAN | é«˜é€Ÿç½‘ç»œè¿žæŽ¥ |
| **USBæŽ¥å£** | 2Ã—USB 3.0 | æ”¯æŒå¤–æŽ¥å­˜å‚¨è®¾å¤‡ |
| **ä»·æ ¼åŒºé—´** | 800-1000å…ƒ | æ€§ä»·æ¯”æžé«˜çš„é«˜ç«¯è·¯ç”±å™¨ |

### ä¸ºä»€ä¹ˆé€‰æ‹©RT-AX86U PROï¼Ÿ

1. **æ€§èƒ½å¼ºåŠ²**ï¼šå››æ ¸1.8GHzå¤„ç†å™¨ï¼Œ1GBå†…å­˜ï¼Œè¿è¡ŒClashæ¯«æ— åŽ‹åŠ›
2. **æ¢…æž—å›ºä»¶æ”¯æŒ**ï¼šå®Œç¾Žæ”¯æŒç¬¬ä¸‰æ–¹æ¢…æž—å›ºä»¶ï¼ŒåŠŸèƒ½ä¸°å¯Œ
3. **ç¨³å®šæ€§å¥½**ï¼šåŽç¡•å“è´¨ä¿è¯ï¼Œé•¿æœŸè¿è¡Œç¨³å®š
4. **æ‰©å±•æ€§å¼º**ï¼šæ”¯æŒå¤šç§æ’ä»¶å’Œè‡ªå®šä¹‰åŠŸèƒ½
5. **æ€§ä»·æ¯”é«˜**ï¼šç›¸æ¯”å…¶ä»–å“ç‰ŒåŒé…ç½®äº§å“ä»·æ ¼æ›´å®žæƒ 

### å…¶ä»–æŽ¨èè·¯ç”±å™¨åž‹å·

| å“ç‰Œ | åž‹å· | CPU | å†…å­˜ | å­˜å‚¨ | ä»·æ ¼åŒºé—´ | æŽ¨èæŒ‡æ•° | å¤‡æ³¨ |
|------|------|-----|------|------|----------|----------|------|
| åŽç¡• | RT-AX86U PRO | åšé€šå››æ ¸1.8GHz | 1GB | 256MB | 800-1000å…ƒ | â­â­â­â­â­ | **æŽ¨èé¦–é€‰** |
| åŽç¡• | RT-AX88U | åšé€šå››æ ¸1.8GHz | 1GB | 256MB | 1200-1500å…ƒ | â­â­â­â­â­ | 8ä¸ªLANå£ |
| åŽç¡• | RT-AC86U | åšé€šåŒæ ¸1.8GHz | 512MB | 128MB | 400-600å…ƒ | â­â­â­â­ | æ€§ä»·æ¯”ä¹‹é€‰ |
| å°ç±³ | AX6000 | IPQ5018 | 512MB | 128MB | 400-500å…ƒ | â­â­â­â­ | éœ€åˆ·OpenWrt |
| ç½‘ä»¶ | R7800 | IPQ8065 | 512MB | 128MB | 300-400å…ƒ | â­â­â­â­ | éœ€åˆ·OpenWrt |

### æœ€ä½Žé…ç½®è¦æ±‚

- **CPU**: åŒæ ¸1.5GHz æˆ–æ›´é«˜æ€§èƒ½
- **å†…å­˜**: 512MB RAM æˆ–æ›´å¤šï¼ˆæŽ¨è1GB+ï¼‰
- **å­˜å‚¨**: 128MB Flash æˆ–æ›´å¤šï¼ˆæŽ¨è256MB+ï¼‰
- **ç½‘ç»œ**: åƒå…†ä»¥å¤ªç½‘æŽ¥å£
- **å›ºä»¶æ”¯æŒ**: æ”¯æŒç¬¬ä¸‰æ–¹å›ºä»¶ï¼ˆæ¢…æž—/OpenWrtï¼‰

## ðŸ”„ æ¢…æž—å›ºä»¶åˆ·æœº

### 1. æ¢…æž—å›ºä»¶ä»‹ç»

![æ¢…æž—å›ºä»¶ç•Œé¢](images/merlin-firmware.png)

**æ¢…æž—å›ºä»¶ï¼ˆASUSWRT-Merlinï¼‰**æ˜¯åŸºäºŽåŽç¡•å®˜æ–¹å›ºä»¶çš„ç¬¬ä¸‰æ–¹å¢žå¼ºç‰ˆæœ¬ï¼Œä¸“ä¸ºåŽç¡•è·¯ç”±å™¨ä¼˜åŒ–ï¼š

- **ä¼˜ç‚¹**: 
  - åŸºäºŽåŽç¡•å®˜æ–¹å›ºä»¶ï¼Œç¨³å®šæ€§æžé«˜
  - ä¿ç•™æ‰€æœ‰å®˜æ–¹åŠŸèƒ½ï¼Œå¢žåŠ æ›´å¤šé«˜çº§é€‰é¡¹
  - æ”¯æŒå¤šç§æ’ä»¶å’Œè‡ªå®šä¹‰è„šæœ¬
  - ç¤¾åŒºæ´»è·ƒï¼Œæ›´æ–°åŠæ—¶
  - å®Œç¾Žæ”¯æŒClashç­‰ä»£ç†å·¥å…·

- **ç¼ºç‚¹**: 
  - ä»…æ”¯æŒåŽç¡•è·¯ç”±å™¨
  - éœ€è¦ä¸€å®šçš„æŠ€æœ¯åŸºç¡€

- **é€‚ç”¨**: åŽç¡•è·¯ç”±å™¨ç”¨æˆ·ï¼Œè¿½æ±‚ç¨³å®šæ€§å’ŒåŠŸèƒ½æ€§çš„ç”¨æˆ·

### 2. åˆ·æœºå‰å‡†å¤‡

#### æ£€æŸ¥è·¯ç”±å™¨åž‹å·
ç¡®ä¿æ‚¨çš„è·¯ç”±å™¨åž‹å·ä¸ºRT-AX86U PROï¼Œå…¶ä»–æ”¯æŒçš„åž‹å·åŒ…æ‹¬ï¼š
- RT-AX88U
- RT-AX86U
- RT-AC86U
- RT-AC88U
- RT-AC68U

#### ä¸‹è½½æ¢…æž—å›ºä»¶

**æ–¹æ³•ä¸€ï¼šé€šè¿‡KoolCenterä¸‹è½½ï¼ˆæŽ¨èï¼‰**
1. è®¿é—®[KoolCenteræ¢…æž—å›ºä»¶ä¸‹è½½é¡µé¢](https://www.koolcenter.com/fw/device/rt-ax88u_pro/merlin)
2. é€‰æ‹©RT-AX86U PROå¯¹åº”çš„å›ºä»¶ç‰ˆæœ¬
3. ä¸‹è½½æœ€æ–°çš„ç¨³å®šç‰ˆæœ¬å›ºä»¶æ–‡ä»¶ï¼ˆ.wæ ¼å¼ï¼‰

![KoolCenterå›ºä»¶ä¸‹è½½é¡µé¢](images/koolcenter-download.png)

**æ–¹æ³•äºŒï¼šé€šè¿‡å®˜æ–¹GitHubä¸‹è½½**
1. è®¿é—®[æ¢…æž—å›ºä»¶å®˜æ–¹GitHub](https://github.com/RMerl/asuswrt-merlin.ng/releases)
2. æ‰¾åˆ°RT-AX86U PROå¯¹åº”çš„å›ºä»¶ç‰ˆæœ¬
3. ä¸‹è½½å›ºä»¶æ–‡ä»¶

**å›ºä»¶ç‰ˆæœ¬é€‰æ‹©å»ºè®®ï¼š**
- **ç¨³å®šç‰ˆ**ï¼šé€‚åˆæ—¥å¸¸ä½¿ç”¨ï¼ŒæŽ¨èæ–°æ‰‹é€‰æ‹©
- **æµ‹è¯•ç‰ˆ**ï¼šåŒ…å«æœ€æ–°åŠŸèƒ½ï¼Œé€‚åˆé«˜çº§ç”¨æˆ·
- **å¼€å‘ç‰ˆ**ï¼šå®žéªŒæ€§åŠŸèƒ½ï¼Œä¸æŽ¨èç”Ÿäº§çŽ¯å¢ƒä½¿ç”¨

#### å¤‡ä»½å½“å‰è®¾ç½®
```bash
# é€šè¿‡SSHè¿žæŽ¥è·¯ç”±å™¨
ssh admin@192.168.1.1

# å¤‡ä»½å½“å‰é…ç½®
nvram show > /tmp/backup_config.txt
```

### 3. è¯¦ç»†åˆ·æœºæ­¥éª¤

#### ç¬¬ä¸€æ­¥ï¼šè¿›å…¥è·¯ç”±å™¨ç®¡ç†ç•Œé¢
1. åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ `http://192.168.1.1` æˆ– `http://router.asus.com`
2. ä½¿ç”¨ç®¡ç†å‘˜è´¦å·ç™»å½•ï¼ˆé»˜è®¤ç”¨æˆ·å/å¯†ç ï¼šadmin/adminï¼‰

![è·¯ç”±å™¨ç™»å½•ç•Œé¢](images/router-login.png)

#### ç¬¬äºŒæ­¥ï¼šå¤‡ä»½å½“å‰è®¾ç½®
1. è¿›å…¥"ç³»ç»Ÿç®¡ç†" â†’ "è®¾ç½®ç®¡ç†"
2. ç‚¹å‡»"å¤‡ä»½"æŒ‰é’®ï¼Œä¸‹è½½å½“å‰é…ç½®
3. ä¿å­˜é…ç½®æ–‡ä»¶åˆ°å®‰å…¨ä½ç½®

![è®¾ç½®å¤‡ä»½ç•Œé¢](images/backup-settings.png)

#### ç¬¬ä¸‰æ­¥ï¼šä¸Šä¼ æ¢…æž—å›ºä»¶
1. è¿›å…¥"ç³»ç»Ÿç®¡ç†" â†’ "å›ºä»¶å‡çº§"
2. ç‚¹å‡»"é€‰æ‹©æ–‡ä»¶"ï¼Œé€‰æ‹©ä¸‹è½½çš„æ¢…æž—å›ºä»¶
3. ç¡®ä¿"æ¢å¤å‡ºåŽ‚è®¾ç½®"é€‰é¡¹å·²å‹¾é€‰
4. ç‚¹å‡»"ä¸Šä¼ "å¼€å§‹åˆ·æœº

![å›ºä»¶å‡çº§ç•Œé¢](images/firmware-upload.png)

#### ç¬¬å››æ­¥ï¼šç­‰å¾…åˆ·æœºå®Œæˆ
- åˆ·æœºè¿‡ç¨‹å¤§çº¦éœ€è¦3-5åˆ†é’Ÿ
- æœŸé—´è¯·å‹¿æ–­ç”µæˆ–é‡å¯è·¯ç”±å™¨
- è·¯ç”±å™¨ä¼šè‡ªåŠ¨é‡å¯

![åˆ·æœºè¿›åº¦](images/flash-progress.png)

#### ç¬¬äº”æ­¥ï¼šæ¢å¤å‡ºåŽ‚è®¾ç½®
åˆ·æœºå®ŒæˆåŽï¼Œå»ºè®®è¿›è¡Œæ¢å¤å‡ºåŽ‚è®¾ç½®ï¼š
1. æŒ‰ä½è·¯ç”±å™¨èƒŒé¢çš„"Reset"æŒ‰é’®10ç§’
2. ç­‰å¾…è·¯ç”±å™¨é‡å¯å®Œæˆ
3. é‡æ–°é…ç½®ç½‘ç»œè®¾ç½®

![æ¢å¤å‡ºåŽ‚è®¾ç½®](images/factory-reset.png)

### 4. éªŒè¯åˆ·æœºæˆåŠŸ

#### æ£€æŸ¥å›ºä»¶ç‰ˆæœ¬
1. é‡æ–°ç™»å½•è·¯ç”±å™¨ç®¡ç†ç•Œé¢
2. æŸ¥çœ‹"ç³»ç»Ÿä¿¡æ¯" â†’ "å›ºä»¶ç‰ˆæœ¬"
3. ç¡®è®¤æ˜¾ç¤ºä¸ºæ¢…æž—å›ºä»¶ç‰ˆæœ¬

![å›ºä»¶ç‰ˆæœ¬ç¡®è®¤](images/firmware-version.png)

#### æ£€æŸ¥æ–°å¢žåŠŸèƒ½
æ¢…æž—å›ºä»¶æ–°å¢žçš„åŠŸèƒ½åŒ…æ‹¬ï¼š
- è½¯ä»¶ä¸­å¿ƒï¼ˆSoftware Centerï¼‰
- æ›´å¤šç½‘ç»œå·¥å…·
- é«˜çº§ç½‘ç»œè®¾ç½®
- è‡ªå®šä¹‰è„šæœ¬æ”¯æŒ

![è½¯ä»¶ä¸­å¿ƒç•Œé¢](images/software-center.png)

## âš™ï¸ Clashå®‰è£…é…ç½®

### 1. Clashä»‹ç»

![Clashç•Œé¢](images/clash-interface.png)

**Clash**æ˜¯ä¸€ä¸ªåŸºäºŽGoè¯­è¨€å¼€å‘çš„å¤šå¹³å°ä»£ç†å®¢æˆ·ç«¯ï¼Œä¸“ä¸ºè·¯ç”±å™¨çŽ¯å¢ƒä¼˜åŒ–ï¼š

- **æ”¯æŒåè®®**: Shadowsocksã€ShadowsocksRã€VMessã€Trojanã€Hysteriaã€WireGuard
- **æ€§èƒ½ä¼˜å¼‚**: ä½Žå»¶è¿Ÿã€é«˜å¹¶å‘ã€å†…å­˜å ç”¨å°‘
- **è§„åˆ™å¼•æ“Ž**: å¼ºå¤§çš„åˆ†æµè§„åˆ™ç³»ç»Ÿ
- **é…ç½®çµæ´»**: æ”¯æŒè®¢é˜…å’Œè‡ªå®šä¹‰é…ç½®
- **ç¨³å®šå¯é **: é•¿æœŸè¿è¡Œä¸å´©æºƒ

### 2. åŽç¡•è·¯ç”±å™¨Clashæ–‡ä»¶ç»“æž„

```
/jffs/clash/                    # Clashä¸»ç›®å½•
â”œâ”€â”€ clash                       # Clashå¯æ‰§è¡Œæ–‡ä»¶
â”œâ”€â”€ config.yaml                 # ä¸»é…ç½®æ–‡ä»¶
â”œâ”€â”€ Country.mmdb                # GeoIPæ•°æ®åº“
â”œâ”€â”€ clash.log                   # è¿è¡Œæ—¥å¿—
â””â”€â”€ rules/                      # è§„åˆ™æ–‡ä»¶ç›®å½•
    â”œâ”€â”€ gfwlist.yaml
    â”œâ”€â”€ chinalist.yaml
    â””â”€â”€ custom.yaml
```

### 3. å®‰è£…Clashæ ¸å¿ƒ

#### æ–¹æ³•ä¸€ï¼šé€šè¿‡è½¯ä»¶ä¸­å¿ƒå®‰è£…ï¼ˆæŽ¨èï¼‰

![è½¯ä»¶ä¸­å¿ƒClash](images/software-center-clash.png)

1. è¿›å…¥è·¯ç”±å™¨ç®¡ç†ç•Œé¢
2. æ‰¾åˆ°"è½¯ä»¶ä¸­å¿ƒ"æˆ–"Software Center"
3. æœç´¢"Clash"æˆ–"ç§‘å­¦ä¸Šç½‘"
4. ç‚¹å‡»å®‰è£…ï¼Œç­‰å¾…å®‰è£…å®Œæˆ

#### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨å®‰è£…

##### ä¸‹è½½Clashæ ¸å¿ƒæ–‡ä»¶

**é€šè¿‡Telegramé¢‘é“ä¸‹è½½ï¼ˆæŽ¨èï¼‰**
1. è®¿é—®[æ’¸çŒ«äº‘Clashæ–‡ä»¶é¢‘é“](https://t.me/s/merlinclashfile)
2. æ ¹æ®æ‚¨çš„è·¯ç”±å™¨åž‹å·é€‰æ‹©å¯¹åº”ç‰ˆæœ¬ï¼š
   - **RT-AX86U PRO**: ä¸‹è½½ `MC_ARM64_250124.tar.gz` æˆ–æœ€æ–°ç‰ˆæœ¬
   - **å…¶ä»–ARM64è·¯ç”±å™¨**: ä¸‹è½½ `MC2_0.5.1_ARM64.tar.gz`
   - **ARM32è·¯ç”±å™¨**: ä¸‹è½½ `MC2_0.5.1_ARM32.tar.gz`

![Telegram Clashä¸‹è½½é¡µé¢](images/telegram-clash-download.png)

**æ”¯æŒçš„åŽç¡•è·¯ç”±å™¨åž‹å·ï¼š**
- **ARM64ç‰ˆæœ¬**ï¼šRT-AX86U PROã€RT-AX88Uã€RT-AX68Uã€RT-AC86Uç­‰
- **ARM32ç‰ˆæœ¬**ï¼šRT-AX3000ã€RT-AX5400ã€RT-AX56Uç­‰

##### å®‰è£…Clashæ–‡ä»¶

**æ­¥éª¤1ï¼šä¸Šä¼ æ–‡ä»¶åˆ°è·¯ç”±å™¨**

**æ–¹æ³•Aï¼šé€šè¿‡Webç•Œé¢ä¸Šä¼ **
1. è¿›å…¥è·¯ç”±å™¨ç®¡ç†ç•Œé¢
2. è¿›å…¥"ç³»ç»Ÿç®¡ç†" â†’ "æ–‡ä»¶ç®¡ç†"
3. ä¸Šä¼ ä¸‹è½½çš„tar.gzæ–‡ä»¶åˆ°/tmpç›®å½•

**æ–¹æ³•Bï¼šé€šè¿‡SCPä¸Šä¼ **
```bash
# Windowsç”¨æˆ·ä½¿ç”¨WinSCP
# Mac/Linuxç”¨æˆ·ä½¿ç”¨scpå‘½ä»¤
scp MC_ARM64_250124.tar.gz admin@192.168.1.1:/tmp/
```

**æ­¥éª¤2ï¼šè§£åŽ‹å’Œå®‰è£…**
```bash
# SSHç™»å½•è·¯ç”±å™¨
ssh admin@192.168.1.1

# åˆ›å»ºClashç›®å½•
mkdir -p /jffs/clash

# è§£åŽ‹æ–‡ä»¶
cd /tmp
tar -xzf MC_ARM64_250124.tar.gz

# æŸ¥çœ‹è§£åŽ‹åŽçš„æ–‡ä»¶ç»“æž„
ls -la clash/

# å¤åˆ¶æ–‡ä»¶åˆ°Clashç›®å½•
cp -r clash/* /jffs/clash/

# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x /jffs/clash/clash

# éªŒè¯æ–‡ä»¶æƒé™
ls -la /jffs/clash/

# æ¸…ç†ä¸´æ—¶æ–‡ä»¶
rm -rf /tmp/clash
rm -f /tmp/MC_ARM64_250124.tar.gz
```

**æ­¥éª¤3ï¼šéªŒè¯å®‰è£…**
```bash
# æµ‹è¯•Clashæ˜¯å¦å¯æ‰§è¡Œ
/jffs/clash/clash -v

# æ£€æŸ¥æ–‡ä»¶ç»“æž„
ls -la /jffs/clash/
```

##### ä¸‹è½½GeoIPæ•°æ®åº“
```bash
# ä¸‹è½½Country.mmdb
cd /jffs/clash
wget https://github.com/Dreamacro/maxmind-geoip/releases/latest/download/Country.mmdb
```

![Clashæ–‡ä»¶ç»“æž„](images/clash-file-structure.png)

### 4. åˆ›å»ºé…ç½®æ–‡ä»¶

#### åŸºç¡€config.yamlé…ç½®
```yaml
# Clashé…ç½®æ–‡ä»¶ - åŽç¡•è·¯ç”±å™¨ä¸“ç”¨
port: 7890
socks-port: 7891
allow-lan: true
mode: rule
log-level: info
external-controller: 0.0.0.0:9090

# DNSé…ç½® - é˜²æ­¢DNSæ³„éœ²
dns:
  enable: true
  listen: 0.0.0.0:53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  nameserver:
    - 223.5.5.5
    - 8.8.8.8
  fallback:
    - 1.1.1.1
    - 8.8.4.4
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4
      - 0.0.0.0/32

# ä»£ç†ç»„é…ç½®
proxy-groups:
  - name: "è‡ªåŠ¨é€‰æ‹©"
    type: url-test
    proxies:
      - é¦™æ¸¯èŠ‚ç‚¹
      - æ–°åŠ å¡èŠ‚ç‚¹
      - ç¾Žå›½èŠ‚ç‚¹
    url: 'http://www.gstatic.com/generate_204'
    interval: 300
    tolerance: 50

  - name: "æ‰‹åŠ¨é€‰æ‹©"
    type: select
    proxies:
      - è‡ªåŠ¨é€‰æ‹©
      - é¦™æ¸¯èŠ‚ç‚¹
      - æ–°åŠ å¡èŠ‚ç‚¹
      - ç¾Žå›½èŠ‚ç‚¹
      - DIRECT

  - name: "å›½å¤–ç½‘ç«™"
    type: select
    proxies:
      - è‡ªåŠ¨é€‰æ‹©
      - æ‰‹åŠ¨é€‰æ‹©
      - DIRECT

  - name: "æ¸¸æˆåŠ é€Ÿ"
    type: url-test
    proxies:
      - é¦™æ¸¯æ¸¸æˆèŠ‚ç‚¹
      - æ–°åŠ å¡æ¸¸æˆèŠ‚ç‚¹
    url: 'http://www.gstatic.com/generate_204'
    interval: 60

  - name: "æµåª’ä½“è§£é”"
    type: select
    proxies:
      - ç¾Žå›½æµåª’ä½“èŠ‚ç‚¹
      - é¦™æ¸¯æµåª’ä½“èŠ‚ç‚¹
      - æ–°åŠ å¡æµåª’ä½“èŠ‚ç‚¹

# ä»£ç†èŠ‚ç‚¹é…ç½®
proxies:
  - name: "é¦™æ¸¯èŠ‚ç‚¹"
    type: ss
    server: hk.example.com
    port: 443
    cipher: aes-256-gcm
    password: "your_password"
    udp: true

  - name: "æ–°åŠ å¡èŠ‚ç‚¹"
    type: vmess
    server: sg.example.com
    port: 443
    uuid: "550e8400-e29b-41d4-a716-446655440000"
    alterId: 0
    cipher: auto
    network: ws
    tls: true
    ws-opts:
      path: "/v2ray"
      headers:
        Host: sg.example.com

  - name: "ç¾Žå›½èŠ‚ç‚¹"
    type: trojan
    server: us.example.com
    port: 443
    password: "your_password"
    udp: true
    sni: us.example.com

# åˆ†æµè§„åˆ™
rules:
  # å¹¿å‘Šå±è”½
  - DOMAIN-SUFFIX,googlesyndication.com,REJECT
  - DOMAIN-SUFFIX,googletagmanager.com,REJECT
  - DOMAIN-SUFFIX,doubleclick.net,REJECT
  
  # æ¸¸æˆåŠ é€Ÿ
  - DOMAIN-SUFFIX,steamcommunity.com,æ¸¸æˆåŠ é€Ÿ
  - DOMAIN-SUFFIX,steampowered.com,æ¸¸æˆåŠ é€Ÿ
  - DOMAIN-SUFFIX,epicgames.com,æ¸¸æˆåŠ é€Ÿ
  - DOMAIN-SUFFIX,battle.net,æ¸¸æˆåŠ é€Ÿ
  
  # æµåª’ä½“è§£é”
  - DOMAIN-SUFFIX,netflix.com,æµåª’ä½“è§£é”
  - DOMAIN-SUFFIX,youtube.com,æµåª’ä½“è§£é”
  - DOMAIN-SUFFIX,disneyplus.com,æµåª’ä½“è§£é”
  
  # å›½å¤–ç½‘ç«™
  - DOMAIN-SUFFIX,google.com,å›½å¤–ç½‘ç«™
  - DOMAIN-SUFFIX,facebook.com,å›½å¤–ç½‘ç«™
  - DOMAIN-SUFFIX,twitter.com,å›½å¤–ç½‘ç«™
  - DOMAIN-SUFFIX,instagram.com,å›½å¤–ç½‘ç«™
  - DOMAIN-SUFFIX,github.com,å›½å¤–ç½‘ç«™
  
  # å›½å†…ç½‘ç«™ç›´è¿ž
  - DOMAIN-SUFFIX,baidu.com,DIRECT
  - DOMAIN-SUFFIX,qq.com,DIRECT
  - DOMAIN-SUFFIX,taobao.com,DIRECT
  - DOMAIN-SUFFIX,tmall.com,DIRECT
  
  # åœ°ç†ä½ç½®è§„åˆ™
  - GEOIP,CN,DIRECT
  - MATCH,å›½å¤–ç½‘ç«™
```

![é…ç½®æ–‡ä»¶ç¼–è¾‘](images/config-edit.png)

### 4. è®¢é˜…é…ç½®

#### æœºåœºè®¢é˜…é…ç½®
```yaml
# åœ¨config.yamlä¸­æ·»åŠ 
proxy-providers:
  airport:
    type: http
    url: "https://your-airport.com/subscribe?token=your_token"
    interval: 3600
    path: ./proxies/airport.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.gstatic.com/generate_204

proxy-groups:
  - name: "æœºåœºèŠ‚ç‚¹"
    type: select
    use:
      - airport
```

#### è‡ªå»ºèŠ‚ç‚¹é…ç½®
```yaml
# æ·»åŠ è‡ªå»ºèŠ‚ç‚¹åˆ°proxieséƒ¨åˆ†
proxies:
  - name: "è‡ªå»ºV2Ray"
    type: vmess
    server: your-server.com
    port: 443
    uuid: "550e8400-e29b-41d4-a716-446655440000"
    alterId: 0
    cipher: auto
    network: ws
    tls: true
    ws-opts:
      path: "/v2ray"
      headers:
        Host: your-server.com
```

## ðŸš€ ç½‘ç»œé…ç½®ä¸Žé€æ˜Žä»£ç†

### 1. é…ç½®Clashå¯åŠ¨è„šæœ¬

#### åˆ›å»ºå¯åŠ¨è„šæœ¬
```bash
# åˆ›å»ºå¯åŠ¨è„šæœ¬
cat > /jffs/scripts/services-start << 'EOF'
#!/bin/sh
# Clashå¯åŠ¨è„šæœ¬
/jffs/clash/clash -d /jffs/clash/ &
EOF

# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x /jffs/scripts/services-start
```

![å¯åŠ¨è„šæœ¬é…ç½®](images/startup-script.png)

#### åˆ›å»ºåœæ­¢è„šæœ¬
```bash
# åˆ›å»ºåœæ­¢è„šæœ¬
cat > /jffs/scripts/services-stop << 'EOF'
#!/bin/sh
# Clashåœæ­¢è„šæœ¬
killall clash
EOF

chmod +x /jffs/scripts/services-stop
```

### 2. é…ç½®é€æ˜Žä»£ç†

#### åˆ›å»ºiptablesè§„åˆ™è„šæœ¬
```bash
# åˆ›å»ºé˜²ç«å¢™è§„åˆ™è„šæœ¬
cat > /jffs/scripts/firewall-start << 'EOF'
#!/bin/sh
# Clashé€æ˜Žä»£ç†è§„åˆ™

# åˆ›å»ºè‡ªå®šä¹‰é“¾
iptables -t nat -N CLASH
iptables -t mangle -N CLASH

# è·³è¿‡å†…ç½‘åœ°å€
iptables -t nat -A CLASH -d 0.0.0.0/8 -j RETURN
iptables -t nat -A CLASH -d 10.0.0.0/8 -j RETURN
iptables -t nat -A CLASH -d 127.0.0.0/8 -j RETURN
iptables -t nat -A CLASH -d 169.254.0.0/16 -j RETURN
iptables -t nat -A CLASH -d 172.16.0.0/12 -j RETURN
iptables -t nat -A CLASH -d 192.168.0.0/16 -j RETURN
iptables -t nat -A CLASH -d 224.0.0.0/4 -j RETURN
iptables -t nat -A CLASH -d 240.0.0.0/4 -j RETURN

# é‡å®šå‘HTTPå’ŒHTTPSæµé‡åˆ°Clash
iptables -t nat -A CLASH -p tcp --dport 80 -j REDIRECT --to-ports 7892
iptables -t nat -A CLASH -p tcp --dport 443 -j REDIRECT --to-ports 7892

# åº”ç”¨è§„åˆ™åˆ°PREROUTINGé“¾
iptables -t nat -A PREROUTING -p tcp -j CLASH

# å¤„ç†è·¯ç”±å™¨è‡ªèº«æµé‡
iptables -t nat -A OUTPUT -p tcp --dport 80 -j REDIRECT --to-ports 7892
iptables -t nat -A OUTPUT -p tcp --dport 443 -j REDIRECT --to-ports 7892
EOF

chmod +x /jffs/scripts/firewall-start
```

![é˜²ç«å¢™è§„åˆ™é…ç½®](images/firewall-rules.png)

### 3. é…ç½®DNSè®¾ç½®

#### ä¿®æ”¹è·¯ç”±å™¨DNSè®¾ç½®
1. è¿›å…¥è·¯ç”±å™¨ç®¡ç†ç•Œé¢
2. è¿›å…¥"é«˜çº§è®¾ç½®" â†’ "LAN" â†’ "DHCPæœåŠ¡å™¨"
3. è®¾ç½®DNSæœåŠ¡å™¨ä¸ºï¼š
   - ä¸»DNSï¼š`192.168.1.1`ï¼ˆè·¯ç”±å™¨IPï¼‰
   - å¤‡ç”¨DNSï¼š`8.8.8.8`

![DNSè®¾ç½®ç•Œé¢](images/dns-settings.png)

#### é…ç½®dnsmasq
```bash
# ä¿®æ”¹dnsmasqé…ç½®
cat >> /jffs/configs/dnsmasq.conf.add << 'EOF'
# Clash DNSé…ç½®
server=127.0.0.1#5353
server=8.8.8.8
server=1.1.1.1
no-resolv
EOF
```

### 4. å¯åŠ¨ClashæœåŠ¡

#### æ‰‹åŠ¨å¯åŠ¨æµ‹è¯•
```bash
# å¯åŠ¨Clash
/jffs/clash/clash -d /jffs/clash/

# æ£€æŸ¥è¿è¡ŒçŠ¶æ€
ps | grep clash

# æŸ¥çœ‹ç«¯å£ç›‘å¬
netstat -tlnp | grep clash
```

![Clashè¿è¡ŒçŠ¶æ€](images/clash-running.png)

#### è®¾ç½®å¼€æœºè‡ªå¯
```bash
# é‡å¯è·¯ç”±å™¨ä½¿è„šæœ¬ç”Ÿæ•ˆ
reboot

# æˆ–è€…æ‰‹åŠ¨æ‰§è¡Œè„šæœ¬
/jffs/scripts/services-start
/jffs/scripts/firewall-start
```

### 5. éªŒè¯é…ç½®

#### æ£€æŸ¥ä»£ç†æ˜¯å¦ç”Ÿæ•ˆ
```bash
# æ£€æŸ¥iptablesè§„åˆ™
iptables -t nat -L CLASH

# æµ‹è¯•ä»£ç†è¿žæŽ¥
curl -x http://127.0.0.1:7890 http://www.google.com

# æ£€æŸ¥DNSè§£æž
nslookup google.com 192.168.1.1
```

#### æµ‹è¯•ç½‘ç»œè¿žæŽ¥
1. åœ¨æµè§ˆå™¨ä¸­è®¿é—® `http://www.google.com`
2. æ£€æŸ¥IPåœ°å€æ˜¯å¦å·²æ”¹å˜
3. è®¿é—® `https://www.whatismyipaddress.com` éªŒè¯IP

![ç½‘ç»œæµ‹è¯•ç»“æžœ](images/network-test.png)

## ðŸŽ¯ é«˜çº§åŠŸèƒ½é…ç½®

### 1. æ™ºèƒ½åˆ†æµ

#### æ¸¸æˆåŠ é€Ÿè§„åˆ™
```yaml
rules:
  # Steamæ¸¸æˆå¹³å°
  - DOMAIN-SUFFIX,steamcommunity.com,æ¸¸æˆåŠ é€Ÿ
  - DOMAIN-SUFFIX,steampowered.com,æ¸¸æˆåŠ é€Ÿ
  - DOMAIN-SUFFIX,steamstatic.com,æ¸¸æˆåŠ é€Ÿ
  
  # Epic Games
  - DOMAIN-SUFFIX,epicgames.com,æ¸¸æˆåŠ é€Ÿ
  - DOMAIN-SUFFIX,unrealengine.com,æ¸¸æˆåŠ é€Ÿ
  
  # æš´é›ªæ¸¸æˆ
  - DOMAIN-SUFFIX,battle.net,æ¸¸æˆåŠ é€Ÿ
  - DOMAIN-SUFFIX,blizzard.com,æ¸¸æˆåŠ é€Ÿ

proxy-groups:
  - name: "æ¸¸æˆåŠ é€Ÿ"
    type: url-test
    proxies:
      - é¦™æ¸¯æ¸¸æˆèŠ‚ç‚¹
      - æ–°åŠ å¡æ¸¸æˆèŠ‚ç‚¹
    url: 'http://www.gstatic.com/generate_204'
    interval: 60
```

#### æµåª’ä½“è§£é”è§„åˆ™
```yaml
rules:
  # Netflix
  - DOMAIN-SUFFIX,netflix.com,æµåª’ä½“è§£é”
  - DOMAIN-SUFFIX,nflximg.net,æµåª’ä½“è§£é”
  - DOMAIN-SUFFIX,nflxext.com,æµåª’ä½“è§£é”
  
  # YouTube
  - DOMAIN-SUFFIX,youtube.com,æµåª’ä½“è§£é”
  - DOMAIN-SUFFIX,ytimg.com,æµåª’ä½“è§£é”
  - DOMAIN-SUFFIX,googlevideo.com,æµåª’ä½“è§£é”
  
  # Disney+
  - DOMAIN-SUFFIX,disneyplus.com,æµåª’ä½“è§£é”
  - DOMAIN-SUFFIX,disney.com,æµåª’ä½“è§£é”

proxy-groups:
  - name: "æµåª’ä½“è§£é”"
    type: select
    proxies:
      - ç¾Žå›½æµåª’ä½“èŠ‚ç‚¹
      - é¦™æ¸¯æµåª’ä½“èŠ‚ç‚¹
      - æ–°åŠ å¡æµåª’ä½“èŠ‚ç‚¹
```

### 2. å¹¿å‘Šå±è”½

#### æ·»åŠ å¹¿å‘Šå±è”½è§„åˆ™
```yaml
rules:
  # å¹¿å‘Šå±è”½
  - DOMAIN-SUFFIX,googlesyndication.com,REJECT
  - DOMAIN-SUFFIX,googletagmanager.com,REJECT
  - DOMAIN-SUFFIX,doubleclick.net,REJECT
  - DOMAIN-SUFFIX,facebook.com,REJECT
  - DOMAIN-SUFFIX,instagram.com,REJECT
  - DOMAIN-SUFFIX,twitter.com,REJECT
  - DOMAIN-SUFFIX,t.co,REJECT
```

### 3. æ€§èƒ½ä¼˜åŒ–

#### å†…å­˜ä¼˜åŒ–
```yaml
# åœ¨config.yamlä¸­æ·»åŠ 
tun:
  enable: true
  stack: system
  dns-hijack:
    - 8.8.8.8:53
    - 1.1.1.1:53
  auto-route: true
  auto-detect-interface: true

# å‡å°‘å†…å­˜ä½¿ç”¨
experimental:
  ignore-resolve-fail: true
  sniff-tls-sni: true
```

#### å¹¶å‘ä¼˜åŒ–
```yaml
# è°ƒæ•´å¹¶å‘è¿žæŽ¥æ•°
tun:
  enable: true
  stack: system
  dns-hijack:
    - 8.8.8.8:53
  auto-route: true
  auto-detect-interface: true
  strict-route: true
```

## ðŸ“Š ç›‘æŽ§ä¸Žç»´æŠ¤

### 1. çŠ¶æ€ç›‘æŽ§

#### å®žæ—¶çŠ¶æ€æŸ¥çœ‹
```bash
# æŸ¥çœ‹ClashçŠ¶æ€
systemctl status clash

# æŸ¥çœ‹ç«¯å£å ç”¨
netstat -tlnp | grep clash

# æŸ¥çœ‹è¿›ç¨‹
ps aux | grep clash

# æŸ¥çœ‹æ—¥å¿—
journalctl -u clash -f
```

#### æµé‡ç»Ÿè®¡
```bash
# æŸ¥çœ‹ç½‘ç»œæŽ¥å£æµé‡
cat /proc/net/dev

# æŸ¥çœ‹Clash APIç»Ÿè®¡
curl http://127.0.0.1:9090/stats
```

### 2. é…ç½®ç®¡ç†

#### é…ç½®å¤‡ä»½
```bash
#!/bin/bash
# å¤‡ä»½è„šæœ¬
BACKUP_DIR="/tmp/clash_backup"
DATE=$(date +%Y%m%d_%H%M%S)

mkdir -p $BACKUP_DIR
cp -r /etc/clash $BACKUP_DIR/clash_$DATE
tar -czf /tmp/clash_backup_$DATE.tar.gz -C $BACKUP_DIR clash_$DATE
echo "å¤‡ä»½å®Œæˆ: /tmp/clash_backup_$DATE.tar.gz"
```

#### é…ç½®æ¢å¤
```bash
#!/bin/bash
# æ¢å¤è„šæœ¬
BACKUP_FILE=$1
if [ -z "$BACKUP_FILE" ]; then
    echo "ä½¿ç”¨æ–¹æ³•: $0 <å¤‡ä»½æ–‡ä»¶è·¯å¾„>"
    exit 1
fi

tar -xzf $BACKUP_FILE -C /tmp/
BACKUP_DIR=$(tar -tzf $BACKUP_FILE | head -1 | cut -f1 -d"/")
cp -r /tmp/$BACKUP_DIR/* /etc/clash/
systemctl restart clash
echo "é…ç½®æ¢å¤å®Œæˆ"
```

### 3. è‡ªåŠ¨æ›´æ–°

#### è®¢é˜…è‡ªåŠ¨æ›´æ–°
```bash
#!/bin/bash
# è®¢é˜…æ›´æ–°è„šæœ¬
cd /etc/clash

# ä¸‹è½½æœ€æ–°é…ç½®
wget -O config_new.yaml "https://your-airport.com/subscribe?token=your_token"

# éªŒè¯é…ç½®æ–‡ä»¶
/usr/bin/clash-meta -t -d /etc/clash -f config_new.yaml

if [ $? -eq 0 ]; then
    mv config_new.yaml config.yaml
    systemctl reload clash
    echo "$(date): é…ç½®æ›´æ–°æˆåŠŸ" >> /var/log/clash_update.log
else
    echo "$(date): é…ç½®æ›´æ–°å¤±è´¥" >> /var/log/clash_update.log
    rm config_new.yaml
fi
```

#### è®¾ç½®å®šæ—¶ä»»åŠ¡
```bash
# ç¼–è¾‘crontab
crontab -e

# æ·»åŠ å®šæ—¶ä»»åŠ¡ï¼ˆæ¯å°æ—¶æ›´æ–°ä¸€æ¬¡ï¼‰
0 * * * * /etc/clash/update_subscription.sh
```

## ðŸ”§ æ•…éšœæŽ’é™¤

### 1. ä¸‹è½½å’Œå®‰è£…é—®é¢˜

#### é—®é¢˜1ï¼šæ— æ³•ä¸‹è½½æ¢…æž—å›ºä»¶
**ç—‡çŠ¶**ï¼šè®¿é—®KoolCenteræˆ–GitHubä¸‹è½½é¡µé¢å¤±è´¥
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ç½‘ç»œè¿žæŽ¥æ˜¯å¦æ­£å¸¸
2. å°è¯•ä½¿ç”¨VPNæˆ–ä»£ç†è®¿é—®
3. ä½¿ç”¨å¤‡ç”¨ä¸‹è½½é“¾æŽ¥
4. è”ç³»ç½‘ç»œæœåŠ¡æä¾›å•†

#### é—®é¢˜2ï¼šæ— æ³•è®¿é—®Telegramé¢‘é“
**ç—‡çŠ¶**ï¼šæ— æ³•æ‰“å¼€[æ’¸çŒ«äº‘Clashæ–‡ä»¶é¢‘é“](https://t.me/s/merlinclashfile)
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®ä¿å·²å®‰è£…Telegramå®¢æˆ·ç«¯
2. ä½¿ç”¨VPNæˆ–ä»£ç†è®¿é—®
3. å°è¯•ä½¿ç”¨Telegram Webç‰ˆæœ¬
4. è”ç³»é¢‘é“ç®¡ç†å‘˜èŽ·å–å¸®åŠ©

#### é—®é¢˜3ï¼šClashæ–‡ä»¶è§£åŽ‹å¤±è´¥
**ç—‡çŠ¶**ï¼štarå‘½ä»¤è§£åŽ‹æ—¶å‡ºçŽ°é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥æ–‡ä»¶å®Œæ•´æ€§
md5sum MC_ARM64_250124.tar.gz

# é‡æ–°ä¸‹è½½æ–‡ä»¶
# ç¡®ä¿æ–‡ä»¶å®Œæ•´ä¸‹è½½

# ä½¿ç”¨ä¸åŒçš„è§£åŽ‹å‚æ•°
tar -xzf MC_ARM64_250124.tar.gz -C /tmp/
```

#### é—®é¢˜4ï¼šæ–‡ä»¶æƒé™é”™è¯¯
**ç—‡çŠ¶**ï¼šClashæ— æ³•æ‰§è¡Œï¼Œæç¤ºæƒé™ä¸è¶³
**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥æ–‡ä»¶æƒé™
ls -la /jffs/clash/clash

# é‡æ–°è®¾ç½®æƒé™
chmod +x /jffs/clash/clash

# æ£€æŸ¥æ–‡ä»¶æ‰€æœ‰è€…
chown root:root /jffs/clash/clash
```

### 2. è¿è¡Œé—®é¢˜

#### é—®é¢˜5ï¼šClashæ— æ³•å¯åŠ¨
```bash
# æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•
/jffs/clash/clash -t -d /jffs/clash

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep 7890

# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
tail -f /jffs/clash/clash.log
```

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥é…ç½®æ–‡ä»¶YAMLè¯­æ³•
2. ç¡®ä¿ç«¯å£æœªè¢«å ç”¨
3. æ£€æŸ¥æ–‡ä»¶æƒé™
4. éªŒè¯Clashæ–‡ä»¶å®Œæ•´æ€§

#### é—®é¢˜6ï¼šæ— æ³•è®¿é—®å¤–ç½‘
```bash
# æ£€æŸ¥DNSè§£æž
nslookup google.com 192.168.1.1

# æ£€æŸ¥ä»£ç†è¿žæŽ¥
curl -x http://127.0.0.1:7890 http://www.google.com

# æ£€æŸ¥iptablesè§„åˆ™
iptables -t nat -L CLASH
```

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥DNSé…ç½®
2. éªŒè¯ä»£ç†èŠ‚ç‚¹å¯ç”¨æ€§
3. æ£€æŸ¥é˜²ç«å¢™è§„åˆ™
4. é‡å¯ClashæœåŠ¡

#### é—®é¢˜7ï¼šé€Ÿåº¦æ…¢
```bash
# æµ‹è¯•èŠ‚ç‚¹å»¶è¿Ÿ
curl -o /dev/null -s -w "æ—¶é—´: %{time_total}s\n" http://www.google.com

# æ£€æŸ¥CPUä½¿ç”¨çŽ‡
top | grep clash

# æ£€æŸ¥å†…å­˜ä½¿ç”¨
free -h
```

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ›´æ¢æ›´å¿«çš„èŠ‚ç‚¹
2. è°ƒæ•´å¹¶å‘è¿žæŽ¥æ•°
3. ä¼˜åŒ–è·¯ç”±å™¨æ€§èƒ½
4. æ£€æŸ¥ç½‘ç»œå¸¦å®½

### 2. è°ƒè¯•å·¥å…·

#### ç½‘ç»œè¯Šæ–­è„šæœ¬
```bash
#!/bin/bash
# ç½‘ç»œè¯Šæ–­è„šæœ¬
echo "=== ClashçŠ¶æ€æ£€æŸ¥ ==="
systemctl is-active clash

echo "=== ç«¯å£æ£€æŸ¥ ==="
netstat -tlnp | grep -E "(7890|7891|9090)"

echo "=== DNSæµ‹è¯• ==="
nslookup google.com 127.0.0.1

echo "=== ä»£ç†æµ‹è¯• ==="
curl -x http://127.0.0.1:7890 -s -o /dev/null -w "HTTPä»£ç†: %{http_code}\n" http://www.google.com
curl -x socks5://127.0.0.1:7891 -s -o /dev/null -w "SOCKS5ä»£ç†: %{http_code}\n" http://www.google.com

echo "=== èŠ‚ç‚¹æµ‹è¯• ==="
curl -s http://127.0.0.1:9090/proxies | jq '.proxies | keys[]'
```

#### æ€§èƒ½ç›‘æŽ§è„šæœ¬
```bash
#!/bin/bash
# æ€§èƒ½ç›‘æŽ§è„šæœ¬
while true; do
    echo "$(date): CPU: $(top -bn1 | grep "Cpu(s)" | awk '{print $2}' | cut -d'%' -f1)%, å†…å­˜: $(free | grep Mem | awk '{printf "%.1f%%", $3/$2 * 100.0}')"
    sleep 60
done
```

## ðŸ”’ å®‰å…¨ä¸Žéšç§

### 1. å®‰å…¨é…ç½®

#### é˜²ç«å¢™è§„åˆ™
```bash
# åªå…è®¸å†…ç½‘è®¿é—®ç®¡ç†ç«¯å£
iptables -A INPUT -p tcp --dport 9090 -s 192.168.1.0/24 -j ACCEPT
iptables -A INPUT -p tcp --dport 9090 -j DROP

# é™åˆ¶SSHè®¿é—®
iptables -A INPUT -p tcp --dport 22 -s 192.168.1.0/24 -j ACCEPT
iptables -A INPUT -p tcp --dport 22 -j DROP
```

#### è®¿é—®æŽ§åˆ¶
```yaml
# åœ¨config.yamlä¸­é…ç½®
external-controller: 127.0.0.1:9090
secret: "your_secret_key"
```

### 2. éšç§ä¿æŠ¤

#### DNSæ³„éœ²é˜²æŠ¤
```yaml
dns:
  enable: true
  listen: 0.0.0.0:53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  nameserver:
    - 223.5.5.5
    - 8.8.8.8
  fallback:
    - 1.1.1.1
    - 8.8.4.4
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4
      - 0.0.0.0/32
```

#### WebRTCæ³„éœ²é˜²æŠ¤
```bash
# æ·»åŠ iptablesè§„åˆ™é˜»æ­¢WebRTC
iptables -A FORWARD -p udp --dport 3478 -j DROP
iptables -A FORWARD -p udp --dport 5349 -j DROP
iptables -A FORWARD -p tcp --dport 3478 -j DROP
iptables -A FORWARD -p tcp --dport 5349 -j DROP
```

### 3. æ—¥å¿—å®‰å…¨

#### æ—¥å¿—è½®è½¬é…ç½®
```bash
# åˆ›å»ºlogrotateé…ç½®
cat > /etc/logrotate.d/clash << 'EOF'
/var/log/clash.log {
    daily
    missingok
    rotate 7
    compress
    notifempty
    create 644 root root
    postrotate
        systemctl reload clash
    endscript
}
EOF
```

#### æ•æ„Ÿä¿¡æ¯è¿‡æ»¤
```bash
# åˆ›å»ºæ—¥å¿—è¿‡æ»¤è„šæœ¬
cat > /usr/local/bin/clash_log_filter.sh << 'EOF'
#!/bin/bash
# è¿‡æ»¤æ•æ„Ÿä¿¡æ¯
sed -i 's/password=[^[:space:]]*/password=***/g' /var/log/clash.log
sed -i 's/token=[^[:space:]]*/token=***/g' /var/log/clash.log
sed -i 's/uuid=[^[:space:]]*/uuid=***/g' /var/log/clash.log
EOF

chmod +x /usr/local/bin/clash_log_filter.sh

# æ·»åŠ åˆ°å®šæ—¶ä»»åŠ¡
echo "0 2 * * * /usr/local/bin/clash_log_filter.sh" | crontab -
```

## ðŸ“š é™„å½•

### 1. å¸¸ç”¨å‘½ä»¤

```bash
# å¯åŠ¨Clash
systemctl start clash

# åœæ­¢Clash
systemctl stop clash

# é‡å¯Clash
systemctl restart clash

# æŸ¥çœ‹çŠ¶æ€
systemctl status clash

# æŸ¥çœ‹æ—¥å¿—
journalctl -u clash -f

# é‡è½½é…ç½®
systemctl reload clash

# æµ‹è¯•é…ç½®
clash-meta -t -d /etc/clash
```

### 2. é…ç½®æ–‡ä»¶æ¨¡æ¿

#### æœ€å°é…ç½®æ¨¡æ¿
```yaml
port: 7890
socks-port: 7891
allow-lan: true
mode: rule
log-level: info
external-controller: 0.0.0.0:9090

dns:
  enable: true
  listen: 0.0.0.0:53
  enhanced-mode: fake-ip
  nameserver:
    - 223.5.5.5
    - 8.8.8.8

proxy-groups:
  - name: "è‡ªåŠ¨é€‰æ‹©"
    type: url-test
    proxies:
      - èŠ‚ç‚¹1
      - èŠ‚ç‚¹2
    url: 'http://www.gstatic.com/generate_204'
    interval: 300

proxies:
  - name: "èŠ‚ç‚¹1"
    type: ss
    server: server1.com
    port: 443
    cipher: aes-256-gcm
    password: "password1"

rules:
  - DOMAIN-SUFFIX,google.com,è‡ªåŠ¨é€‰æ‹©
  - GEOIP,CN,DIRECT
  - MATCH,è‡ªåŠ¨é€‰æ‹©
```

### 3. æ•…éšœæŽ’é™¤æ£€æŸ¥æ¸…å•

- [ ] è·¯ç”±å™¨å›ºä»¶æ˜¯å¦æ­£ç¡®å®‰è£…
- [ ] Clashæ ¸å¿ƒæ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¸”å¯æ‰§è¡Œ
- [ ] é…ç½®æ–‡ä»¶è¯­æ³•æ˜¯å¦æ­£ç¡®
- [ ] ä»£ç†èŠ‚ç‚¹æ˜¯å¦å¯ç”¨
- [ ] ç«¯å£æ˜¯å¦è¢«å ç”¨
- [ ] é˜²ç«å¢™è§„åˆ™æ˜¯å¦æ­£ç¡®
- [ ] DNSé…ç½®æ˜¯å¦æ­£ç¡®
- [ ] ç½‘ç»œæŽ¥å£æ˜¯å¦æ­£å¸¸
- [ ] æ—¥å¿—ä¸­æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
- [ ] ç³»ç»Ÿèµ„æºæ˜¯å¦å……è¶³

### 4. åŽç¡•è·¯ç”±å™¨æ€§èƒ½ä¼˜åŒ–å»ºè®®

#### ç¡¬ä»¶ä¼˜åŒ–
1. **CPUæ€§èƒ½è°ƒä¼˜**
   ```bash
   # è®¾ç½®CPUæ€§èƒ½æ¨¡å¼
   echo performance > /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
   echo performance > /sys/devices/system/cpu/cpu1/cpufreq/scaling_governor
   echo performance > /sys/devices/system/cpu/cpu2/cpufreq/scaling_governor
   echo performance > /sys/devices/system/cpu/cpu3/cpufreq/scaling_governor
   ```

2. **å†…å­˜ä¼˜åŒ–**
   ```bash
   # æ¸…ç†å†…å­˜ç¼“å­˜
   echo 3 > /proc/sys/vm/drop_caches
   
   # è®¾ç½®å†…å­˜å›žæ”¶ç­–ç•¥
   echo 1 > /proc/sys/vm/swappiness
   ```

3. **ç½‘ç»œä¼˜åŒ–**
   - å¯ç”¨ç¡¬ä»¶NATåŠ é€Ÿ
   - ä½¿ç”¨2.5G WANå£ï¼ˆå¦‚æžœå¯ç”¨ï¼‰
   - ä¼˜åŒ–Wi-Fiè®¾ç½®

#### è½¯ä»¶ä¼˜åŒ–
1. **Clashé…ç½®ä¼˜åŒ–**
   ```yaml
   # åœ¨config.yamlä¸­æ·»åŠ 
   tun:
     enable: true
     stack: system
     dns-hijack:
       - 8.8.8.8:53
       - 1.1.1.1:53
     auto-route: true
     auto-detect-interface: true
   
   # æ€§èƒ½ä¼˜åŒ–
   experimental:
     ignore-resolve-fail: true
     sniff-tls-sni: true
     sniff: true
   ```

2. **ç³»ç»Ÿä¼˜åŒ–**
   ```bash
   # ä¼˜åŒ–ç½‘ç»œå‚æ•°
   echo 'net.core.rmem_max = 16777216' >> /etc/sysctl.conf
   echo 'net.core.wmem_max = 16777216' >> /etc/sysctl.conf
   echo 'net.ipv4.tcp_rmem = 4096 87380 16777216' >> /etc/sysctl.conf
   echo 'net.ipv4.tcp_wmem = 4096 65536 16777216' >> /etc/sysctl.conf
   ```

#### åŽç¡•è·¯ç”±å™¨ç‰¹æœ‰ä¼˜åŒ–
1. **AiProtectionè®¾ç½®**
   - å…³é—­ä¸å¿…è¦çš„å®‰å…¨æ‰«æåŠŸèƒ½
   - ä¿ç•™åŸºæœ¬é˜²ç«å¢™åŠŸèƒ½

2. **QoSè®¾ç½®**
   - ä¸ºClashæµé‡è®¾ç½®é«˜ä¼˜å…ˆçº§
   - é™åˆ¶å…¶ä»–è®¾å¤‡çš„å¸¦å®½ä½¿ç”¨

3. **USBå­˜å‚¨ä¼˜åŒ–**
   - ä½¿ç”¨USB 3.0æŽ¥å£
   - é€‰æ‹©é«˜é€ŸUSBå­˜å‚¨è®¾å¤‡
   - å®šæœŸæ¸…ç†ä¸´æ—¶æ–‡ä»¶

#### ç›‘æŽ§å’Œç»´æŠ¤
1. **æ€§èƒ½ç›‘æŽ§è„šæœ¬**
   ```bash
   #!/bin/bash
   # åŽç¡•è·¯ç”±å™¨æ€§èƒ½ç›‘æŽ§
   while true; do
       echo "=== $(date) ==="
       echo "CPUä½¿ç”¨çŽ‡: $(top -bn1 | grep "Cpu(s)" | awk '{print $2}' | cut -d'%' -f1)%"
       echo "å†…å­˜ä½¿ç”¨: $(free | grep Mem | awk '{printf "%.1f%%", $3/$2 * 100.0}')"
       echo "æ¸©åº¦: $(cat /proc/dmu/temperature 2>/dev/null || echo "N/A")"
       echo "Clashè¿›ç¨‹: $(ps | grep clash | wc -l)"
       echo "ç½‘ç»œè¿žæŽ¥: $(netstat -an | grep :7890 | wc -l)"
       sleep 60
   done
   ```

2. **è‡ªåŠ¨é‡å¯è„šæœ¬**
   ```bash
   # åˆ›å»ºè‡ªåŠ¨é‡å¯è„šæœ¬
   cat > /jffs/scripts/auto-restart << 'EOF'
   #!/bin/sh
   # æ¯å¤©å‡Œæ™¨3ç‚¹é‡å¯Clash
   if [ "$(date +%H)" = "03" ]; then
       killall clash
       sleep 5
       /jffs/clash/clash -d /jffs/clash/ &
   fi
   EOF
   
   chmod +x /jffs/scripts/auto-restart
   
   # æ·»åŠ åˆ°crontab
   echo "0 3 * * * /jffs/scripts/auto-restart" | crontab -
   ```

---

## âš ï¸ å…è´£å£°æ˜Ž

æœ¬æ•™ç¨‹ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œè¯·éµå®ˆå½“åœ°æ³•å¾‹æ³•è§„ã€‚ä½¿ç”¨æœ¬æ•™ç¨‹æ‰€äº§ç”Ÿçš„ä»»ä½•åŽæžœï¼Œä½œè€…ä¸æ‰¿æ‹…ä»»ä½•è´£ä»»ã€‚è¯·åˆç†ä½¿ç”¨ç½‘ç»œèµ„æºï¼Œå°Šé‡ä»–äººçš„çŸ¥è¯†äº§æƒã€‚

## ðŸ“ž æŠ€æœ¯æ”¯æŒ

å¦‚æžœæ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼èŽ·å–å¸®åŠ©ï¼š

1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæŽ’é™¤éƒ¨åˆ†
2. æœç´¢ç›¸å…³æŠ€æœ¯è®ºå›
3. æŸ¥çœ‹Clashå®˜æ–¹æ–‡æ¡£
4. æäº¤Issueåˆ°é¡¹ç›®ä»“åº“

---

## ðŸ“ ç‰ˆæœ¬æ›´æ–°è¯´æ˜Ž

### v2.0 (2024å¹´1æœˆ)
- âœ… æ·»åŠ å®˜æ–¹ä¸‹è½½é“¾æŽ¥ï¼š[KoolCenteræ¢…æž—å›ºä»¶](https://www.koolcenter.com/fw/device/rt-ax88u_pro/merlin)
- âœ… æ·»åŠ Telegram Clashæ–‡ä»¶ä¸‹è½½ï¼š[æ’¸çŒ«äº‘é¢‘é“](https://t.me/s/merlinclashfile)
- âœ… ä¼˜åŒ–åŽç¡•RT-AX86U PROä¸“ç”¨é…ç½®
- âœ… å¢žåŠ è¯¦ç»†çš„æ–‡ä»¶ä¸Šä¼ å’Œå®‰è£…æ­¥éª¤
- âœ… å®Œå–„æ•…éšœæŽ’é™¤æŒ‡å—
- âœ… æ·»åŠ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### v1.0 (2024å¹´1æœˆ)
- âœ… åŸºç¡€æ•™ç¨‹æ¡†æž¶
- âœ… ç¡¬ä»¶ä»‹ç»å’ŒæŽ¨è
- âœ… æ¢…æž—å›ºä»¶åˆ·æœºæŒ‡å—
- âœ… Clashé…ç½®æ•™ç¨‹
- âœ… ç½‘ç»œé…ç½®è¯´æ˜Ž

### è®¡åˆ’æ›´æ–°
- ðŸ”„ æ·»åŠ æ›´å¤šè·¯ç”±å™¨åž‹å·æ”¯æŒ
- ðŸ”„ å¢žåŠ è§†é¢‘æ•™ç¨‹é“¾æŽ¥
- ðŸ”„ ä¼˜åŒ–é…ç½®æ–‡ä»¶æ¨¡æ¿
- ðŸ”„ æ·»åŠ è‡ªåŠ¨åŒ–å®‰è£…è„šæœ¬

---

**æœ€åŽæ›´æ–°**: 2024å¹´1æœˆ  
**ç‰ˆæœ¬**: v2.0  
**ä½œè€…**: Router VPN Team

### å‚è€ƒèµ„æº
- [KoolCenteræ¢…æž—å›ºä»¶ä¸‹è½½](https://www.koolcenter.com/fw/device/rt-ax88u_pro/merlin)
- [æ’¸çŒ«äº‘Clashæ–‡ä»¶é¢‘é“](https://t.me/s/merlinclashfile)
- [æ¢…æž—å›ºä»¶å®˜æ–¹GitHub](https://github.com/RMerl/asuswrt-merlin.ng)
- [Clashå®˜æ–¹æ–‡æ¡£](https://clash.gitbook.io/)
